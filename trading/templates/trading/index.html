{% extends 'trading/base.html' %}

{% block title %}Home - Algo Trader{% endblock %}

{% block content %}
<div class="card">
    <h2>Dashboard</h2>
    
    <div style="margin: 2rem 0;">
        <div class="metric">
            <div class="metric-value">{{ total_strategies }}</div>
            <div class="metric-label">Active Strategies</div>
        </div>
        
        <div class="metric">
            <div class="metric-value">{{ total_backtests }}</div>
            <div class="metric-label">Total Backtests</div>
        </div>
        
        <div class="metric">
            <div class="metric-value">{{ symbols_count|default:0 }}</div>
            <div class="metric-label">Symbols</div>
        </div>
        
        <div class="metric">
            <div class="metric-value">{{ total_candles|default:0 }}</div>
            <div class="metric-label">Candles</div>
        </div>
    </div>
</div>

<div class="card">
    <h2>Recent Backtests</h2>
    
    {% if recent_backtests %}
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Strategy</th>
                <th>Period</th>
                <th>Status</th>
                <th>Created</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for backtest in recent_backtests %}
            <tr>
                <td>#{{ backtest.id }}</td>
                <td>{{ backtest.strategy.name }}</td>
                <td>{{ backtest.start_time|date:"Y-m-d" }} to {{ backtest.end_time|date:"Y-m-d" }}</td>
                <td class="status-{{ backtest.status }}">{{ backtest.get_status_display }}</td>
                <td>{{ backtest.created_at|date:"Y-m-d H:i" }}</td>
                <td>
                    <a href="{% url 'trading:backtest_results' backtest.id %}" class="btn">View Results</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>No backtests yet. <a href="{% url 'trading:backtest_run' %}">Run your first backtest</a></p>
    {% endif %}
</div>

<div class="card">
    <h2>Quick Start</h2>
    
    <h3>1. Ingest Market Data</h3>
    <p>Use the web interface to fetch historical market data from exchanges.</p>
    <p style="margin-top: 0.5rem;">
        <a href="{% url 'trading:ingest_data' %}" class="btn btn-success">ğŸ“¥ Ingest Market Data</a>
        <a href="{% url 'trading:manage_data' %}" class="btn">ğŸ—‚ï¸ Manage Data</a>
    </p>
    
    <h3 style="margin-top: 1.5rem;">2. Run a Backtest</h3>
    <p>Create and run backtests using your ingested data and available strategies.</p>
    <p style="margin-top: 0.5rem;">
        <a href="{% url 'trading:strategy_list' %}" class="btn">View Strategies</a>
        <a href="{% url 'trading:backtest_run' %}" class="btn btn-success">Create Backtest</a>
    </p>
</div>
{% endblock %}
