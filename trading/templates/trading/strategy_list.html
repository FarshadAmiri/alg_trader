{% extends 'trading/base.html' %}

{% block title %}Strategies - Algo Trader{% endblock %}

{% block content %}
<div class="card">
    <h2>Trading Strategies</h2>
    
    {% if strategies %}
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Timeframe</th>
                <th>Description</th>
                <th>Backtests</th>
                <th>Active</th>
                <th>Created</th>
            </tr>
        </thead>
        <tbody>
            {% for strategy in strategies %}
            <tr>
                <td><strong>{{ strategy.name }}</strong></td>
                <td>
                    <code style="background: #e3f2fd; padding: 0.2rem 0.5rem; border-radius: 3px; font-weight: 600; color: #1976d2;">{{ strategy.timeframe }}</code>
                </td>
                <td>{{ strategy.description|truncatewords:15 }}</td>
                <td>{{ strategy.backtest_count }}</td>
                <td>
                    {% if strategy.is_active %}
                    <span style="color: #27ae60;">âœ“ Active</span>
                    {% else %}
                    <span style="color: #e74c3c;">âœ— Inactive</span>
                    {% endif %}
                </td>
                <td>{{ strategy.created_at|date:"Y-m-d" }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>No strategies found. Add strategies via Django admin.</p>
    {% endif %}
    
    <p style="margin-top: 1.5rem;">
        <a href="/admin/trading/strategy/add/" class="btn">Add New Strategy</a>
        <a href="{% url 'trading:backtest_run' %}" class="btn btn-success">Run Backtest</a>
    </p>
</div>

<div class="card">
    <h2>Available Built-in Strategies</h2>
    
    <p style="background: #e3f2fd; padding: 1rem; border-radius: 4px; margin-bottom: 1rem;">
        ðŸ’¡ <strong>Strategy Auto-Configuration:</strong> Each strategy defines its own timeframe requirements, 
        evaluation mode (every bar or periodic), and hold times. The backtest system automatically configures 
        itself based on the strategy's preferences.
    </p>
    
    <h3>1. MACD RSI Confluence</h3>
    <p><strong>Module:</strong> <code>core_engine.strategies.macd_rsi_confluence:MACDRSIStrategy</code></p>
    <p><strong>Timeframe:</strong> 1h | <strong>Evaluation:</strong> Every 2 hours | <strong>Hold:</strong> 4-8h typical</p>
    <p>Baseline strategy using MACD and RSI with volatility and volume filters.</p>
    
    <h3>2. Momentum Rank</h3>
    <p><strong>Module:</strong> <code>core_engine.strategies.momentum_rank:MomentumRankStrategy</code></p>
    <p><strong>Timeframe:</strong> 15m | <strong>Evaluation:</strong> Every hour | <strong>Hold:</strong> 3-6h typical</p>
    <p>Ranks symbols by multi-timeframe momentum score.</p>
    
    <h3>3. Bollinger Mean Reversion</h3>
    <p><strong>Module:</strong> <code>core_engine.strategies.bollinger_mean_reversion:BollingerMeanReversionStrategy</code></p>
    <p><strong>Timeframe:</strong> 5m | <strong>Evaluation:</strong> Every bar | <strong>Hold:</strong> 30m-4h typical</p>
    <p>High-frequency mean reversion strategy using Bollinger Bands, RSI, and volume spikes.</p>
</div>
{% endblock %}
